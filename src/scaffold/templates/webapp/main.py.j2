from pathlib import Path

from fastapi import FastAPI
from fastapi.responses import HTMLResponse
from fastapi.staticfiles import StaticFiles
from fastapi.templating import Jinja2Templates

from {{ package_name }}.routes import router

app = FastAPI(title="{{ project_name }}", description="{{ description }}")

templates_dir = Path(__file__).parent / "templates"
assert templates_dir.exists(), "Templates directory must exist"
assert templates_dir.is_dir(), "Templates path must be a directory"

templates = Jinja2Templates(directory=str(templates_dir))

app.include_router(router)


@app.get("/", response_class=HTMLResponse)
async def root():
    assert templates is not None, "Templates must be initialized"

    return templates.TemplateResponse("base.html", {"request": {}, "title": "{{ project_name }}"})
